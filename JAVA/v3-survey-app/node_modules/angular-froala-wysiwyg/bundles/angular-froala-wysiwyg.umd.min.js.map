{"version":3,"sources":["webpack://angular-froala-wysiwyg.umd.min/webpack/universalModuleDefinition","webpack://angular-froala-wysiwyg.umd.min/webpack/bootstrap","webpack://angular-froala-wysiwyg.umd.min/external \"@angular/core\"","webpack://angular-froala-wysiwyg.umd.min/external \"@angular/forms\"","webpack://angular-froala-wysiwyg.umd.min/./.tmp/editor/editor.directive.ts","webpack://angular-froala-wysiwyg.umd.min/./.tmp/editor/editor.module.ts","webpack://angular-froala-wysiwyg.umd.min/./.tmp/view/view.directive.ts","webpack://angular-froala-wysiwyg.umd.min/./.tmp/view/view.module.ts","webpack://angular-froala-wysiwyg.umd.min/./.tmp/index.ts"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__0__","__WEBPACK_EXTERNAL_MODULE__1__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","editor_directive_FroalaEditorDirective","FroalaEditorDirective","el","zone","this","_opts","immediateAngularModelUpdate","angularIgnoreAttrs","SPECIAL_TAGS","INNER_HTML_ATTR","_hasSpecialTag","_listeningEvents","_editorInitialized","_oldModel","onChange","_","onTouched","froalaModelChange","core_","froalaInit","element","nativeElement","indexOf","tagName","toLowerCase","_$element","$","writeValue","content","updateEditor","registerOnChange","fn","registerOnTouched","opts","JSON","stringify","_model","setContent","froalaEditor","html","updateModel","_this","run","modelContent","attributeNodes","attributes","attrs","length","attrName","innerHTML","returnedHtml","emit","registerEvent","eventName","callback","push","on","initListeners","self","setTimeout","registerFroalaEvents","events","createEditor","runOutsideAngular","_editor","data","$el","setHtml","firstTime","tags","attr","destroyEditor","off","join","getEditor","bind","generateManualController","controls","initialize","destroy","ngOnInit","observers","ngOnDestroy","__decorate","FroalaEditorDirective_1","selector","exportAs","providers","provide","forms_","useExisting","multi","editor_module_FroalaEditorModule","FroalaEditorModule","forRoot","ngModule","FroalaEditorModule_1","editor_module_decorate","declarations","view_directive_FroalaViewDirective","FroalaViewDirective","renderer","_element","ngAfterViewInit","addClass","view_directive_decorate","view_module_FroalaViewModule","FroalaViewModule","FroalaViewModule_1","view_module_decorate","MODULES","_tmp_FERootModule","FERootModule","_tmp_decorate","imports"],"mappings":"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","file":"angular-froala-wysiwyg.umd.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@angular/core\"), require(\"@angular/forms\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@angular/core\", \"@angular/forms\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"angular-froala-wysiwyg.umd.min\"] = factory(require(\"@angular/core\"), require(\"@angular/forms\"));\n\telse\n\t\troot[\"angular-froala-wysiwyg.umd.min\"] = factory(root[\"@angular/core\"], root[\"@angular/forms\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__, __WEBPACK_EXTERNAL_MODULE__1__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","import { ControlValueAccessor, NG_VALUE_ACCESSOR } from \"@angular/forms\";\r\nimport { Directive, ElementRef, EventEmitter, Input, NgZone, Optional, Output, forwardRef } from '@angular/core';\r\n\r\ndeclare var $: JQueryStatic;\r\n\r\n\r\n@Directive({\r\n  selector: '[froalaEditor]',\r\n  exportAs: 'froalaEditor',\r\n  providers: [{\r\n    provide: NG_VALUE_ACCESSOR, useExisting:\r\n      forwardRef(() => FroalaEditorDirective),\r\n    multi: true\r\n  }]\r\n})\r\nexport class FroalaEditorDirective implements ControlValueAccessor {\r\n\r\n  // editor options\r\n  private _opts: any = {\r\n    immediateAngularModelUpdate: false,\r\n    angularIgnoreAttrs: null\r\n  };\r\n\r\n  // jquery wrapped element\r\n  private _$element: any;\r\n\r\n  private SPECIAL_TAGS: string[] = ['img', 'button', 'input', 'a'];\r\n  private INNER_HTML_ATTR: string = 'innerHTML';\r\n  private _hasSpecialTag: boolean = false;\r\n\r\n  // editor element\r\n  private _editor: any;\r\n\r\n  // initial editor content\r\n  private _model: string;\r\n\r\n  private _listeningEvents: string[] = [];\r\n\r\n  private _editorInitialized: boolean = false;\r\n\r\n  private _oldModel: string = null;\r\n\r\n  constructor(el: ElementRef, private zone: NgZone) {\r\n\r\n    let element: any = el.nativeElement;\r\n\r\n    // check if the element is a special tag\r\n    if (this.SPECIAL_TAGS.indexOf(element.tagName.toLowerCase()) != -1) {\r\n      this._hasSpecialTag = true;\r\n    }\r\n\r\n    // jquery wrap and store element\r\n    this._$element = (<any>$(element));\r\n\r\n    this.zone = zone;\r\n  }\r\n\r\n  // Begin ControlValueAccesor methods.\r\n  onChange = (_) => { };\r\n  onTouched = () => { };\r\n\r\n  // Form model content changed.\r\n  writeValue(content: any): void {\r\n    this.updateEditor(content);\r\n  }\r\n\r\n  registerOnChange(fn: (_: any) => void): void { this.onChange = fn; }\r\n  registerOnTouched(fn: () => void): void { this.onTouched = fn; }\r\n  // End ControlValueAccesor methods.\r\n\r\n  // froalaEditor directive as input: store the editor options\r\n  @Input() set froalaEditor(opts: any) {\r\n    this._opts = opts || this._opts;\r\n  }\r\n\r\n  // froalaModel directive as input: store initial editor content\r\n  @Input() set froalaModel(content: any) {\r\n    this.updateEditor(content);\r\n  }\r\n\r\n  // Update editor with model contents.\r\n  private updateEditor(content: any) {\r\n    if (JSON.stringify(this._oldModel) == JSON.stringify(content)) {\r\n      return;\r\n    }\r\n\r\n    if (!this._hasSpecialTag) {\r\n      this._oldModel = content;\r\n    }\r\n    else {\r\n      this._model = content;\r\n    }\r\n\r\n    if (this._editorInitialized) {\r\n      if (!this._hasSpecialTag) {\r\n        this._$element.froalaEditor('html.set', content);\r\n      }\r\n      else {\r\n        this.setContent();\r\n      }\r\n    }\r\n    else {\r\n      if (!this._hasSpecialTag) {\r\n        this._$element.html(content);\r\n      }\r\n      else {\r\n        this.setContent();\r\n      }\r\n    }\r\n  }\r\n\r\n  // froalaModel directive as output: update model if editor contentChanged\r\n  @Output() froalaModelChange: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n  // froalaInit directive as output: send manual editor initialization\r\n  @Output() froalaInit: EventEmitter<Object> = new EventEmitter<Object>();\r\n\r\n  // update model if editor contentChanged\r\n  private updateModel() {\r\n    this.zone.run(() => {\r\n\r\n      let modelContent: any = null;\r\n\r\n      if (this._hasSpecialTag) {\r\n\r\n        let attributeNodes = this._$element[0].attributes;\r\n        let attrs = {};\r\n\r\n        for (let i = 0; i < attributeNodes.length; i++) {\r\n\r\n          let attrName = attributeNodes[i].name;\r\n          if (this._opts.angularIgnoreAttrs && this._opts.angularIgnoreAttrs.indexOf(attrName) != -1) {\r\n            continue;\r\n          }\r\n\r\n          attrs[attrName] = attributeNodes[i].value;\r\n        }\r\n\r\n        if (this._$element[0].innerHTML) {\r\n          attrs[this.INNER_HTML_ATTR] = this._$element[0].innerHTML;\r\n        }\r\n\r\n        modelContent = attrs;\r\n      } else {\r\n\r\n        let returnedHtml: any = this._$element.froalaEditor('html.get');\r\n        if (typeof returnedHtml === 'string') {\r\n          modelContent = returnedHtml;\r\n        }\r\n      }\r\n      if (this._oldModel !== modelContent) {\r\n        this._oldModel = modelContent;\r\n\r\n        // Update froalaModel.\r\n        this.froalaModelChange.emit(modelContent);\r\n\r\n        // Update form model.\r\n        this.onChange(modelContent);\r\n      }\r\n\r\n    })\r\n  }\r\n\r\n  // register event on jquery element\r\n  private registerEvent(element, eventName, callback) {\r\n\r\n    if (!element || !eventName || !callback) {\r\n      return;\r\n    }\r\n\r\n    this._listeningEvents.push(eventName);\r\n    element.on(eventName, callback);\r\n  }\r\n\r\n  private initListeners() {\r\n\r\n    let self = this;\r\n\r\n    // bind contentChange and keyup event to froalaModel\r\n    this.registerEvent(this._$element, 'froalaEditor.contentChanged', function () {\r\n      setTimeout(function () {\r\n        self.updateModel();\r\n      }, 0);\r\n    });\r\n    this.registerEvent(this._$element, 'froalaEditor.mousedown', function () {\r\n      setTimeout(function () {\r\n        self.onTouched();\r\n      }, 0);\r\n    });\r\n\r\n    if (this._opts.immediateAngularModelUpdate) {\r\n      this.registerEvent(this._$element, 'keyup', function () {\r\n        setTimeout(function () {\r\n          self.updateModel();\r\n        }, 0);\r\n      });\r\n    }\r\n  }\r\n\r\n  // register events from editor options\r\n  private registerFroalaEvents() {\r\n\r\n    if (!this._opts.events) {\r\n      return;\r\n    }\r\n\r\n    for (let eventName in this._opts.events) {\r\n\r\n      if (this._opts.events.hasOwnProperty(eventName)) {\r\n        this.registerEvent(this._$element, eventName, this._opts.events[eventName]);\r\n      }\r\n    }\r\n  }\r\n\r\n  private createEditor() {\r\n\r\n    if (this._editorInitialized) {\r\n      return;\r\n    }\r\n\r\n    this.setContent(true);\r\n\r\n    // Registering events before initializing the editor will bind the initialized event correctly.\r\n    this.registerFroalaEvents();\r\n\r\n    this.initListeners();\r\n\r\n    // init editor\r\n    this.zone.runOutsideAngular(() => {\r\n      this._$element.on('froalaEditor.initialized', () => {\r\n        this._editorInitialized = true;\r\n      })\r\n\r\n      this._editor = this._$element.froalaEditor(this._opts).data('froala.editor').$el;\r\n    })\r\n  }\r\n\r\n  private setHtml() {\r\n    this._$element.froalaEditor('html.set', this._model || '', true);\r\n\r\n    // This will reset the undo stack everytime the model changes externally. Can we fix this?\r\n    this._$element.froalaEditor('undo.reset');\r\n    this._$element.froalaEditor('undo.saveStep');\r\n  }\r\n\r\n  private setContent(firstTime = false) {\r\n    let self = this;\r\n\r\n    // Set initial content\r\n    if (this._model || this._model == '') {\r\n      this._oldModel = this._model;\r\n      if (this._hasSpecialTag) {\r\n\r\n        let tags: Object = this._model;\r\n\r\n        // add tags on element\r\n        if (tags) {\r\n\r\n          for (let attr in tags) {\r\n            if (tags.hasOwnProperty(attr) && attr != this.INNER_HTML_ATTR) {\r\n              this._$element.attr(attr, tags[attr]);\r\n            }\r\n          }\r\n\r\n          if (tags.hasOwnProperty(this.INNER_HTML_ATTR)) {\r\n            this._$element[0].innerHTML = tags[this.INNER_HTML_ATTR];\r\n          }\r\n        }\r\n      } else {\r\n        if (firstTime) {\r\n          this.registerEvent(this._$element, 'froalaEditor.initialized', function () {\r\n            self.setHtml();\r\n          });\r\n        } else {\r\n          self.setHtml();\r\n        }\r\n\r\n      }\r\n    }\r\n  }\r\n\r\n  private destroyEditor() {\r\n    if (this._editorInitialized) {\r\n      this._$element.off(this._listeningEvents.join(\" \"));\r\n      this._editor.off('keyup');\r\n      this._$element.froalaEditor('destroy');\r\n      this._listeningEvents.length = 0;\r\n      this._editorInitialized = false;\r\n    }\r\n  }\r\n\r\n  private getEditor() {\r\n    if (this._$element) {\r\n      return this._$element.froalaEditor.bind(this._$element);\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  // send manual editor initialization\r\n  private generateManualController() {\r\n    let self = this;\r\n    let controls = {\r\n      initialize: this.createEditor.bind(this),\r\n      destroy: this.destroyEditor.bind(this),\r\n      getEditor: this.getEditor.bind(this),\r\n    };\r\n    this.froalaInit.emit(controls);\r\n  }\r\n\r\n  // TODO not sure if ngOnInit is executed after @inputs\r\n  ngOnInit() {\r\n    // check if output froalaInit is present. Maybe observers is private and should not be used?? TODO how to better test that an output directive is present.\r\n    if (!this.froalaInit.observers.length) {\r\n      this.createEditor();\r\n    } else {\r\n      this.generateManualController();\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroyEditor();\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\n\r\nimport { FroalaEditorDirective } from './editor.directive';\r\n\r\n@NgModule({\r\n  declarations: [FroalaEditorDirective],\r\n  exports: [FroalaEditorDirective]\r\n})\r\n\r\nexport class FroalaEditorModule {\r\n  public static forRoot(): ModuleWithProviders {\r\n    return {ngModule: FroalaEditorModule, providers: []};\r\n  }\r\n}\r\n","import { Directive, ElementRef, Renderer2, Input } from '@angular/core';\r\n\r\n@Directive({\r\n  selector: '[froalaView]'\r\n})\r\nexport class FroalaViewDirective {\r\n\r\n  private _element: HTMLElement;\r\n  private _content: any;\r\n\r\n  constructor(private renderer: Renderer2, element: ElementRef) {\r\n    this._element = element.nativeElement;\r\n  }\r\n\r\n  // update content model as it comes\r\n  @Input() set froalaView(content: string){\r\n    this._element.innerHTML = content;\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.renderer.addClass(this._element, \"fr-view\");\r\n  }\r\n}","import { NgModule, ModuleWithProviders } from '@angular/core';\r\n\r\nimport { FroalaViewDirective } from './view.directive';\r\n\r\n@NgModule({\r\n  declarations: [FroalaViewDirective],\r\n  exports: [FroalaViewDirective]\r\n})\r\nexport class FroalaViewModule {\r\n  public static forRoot(): ModuleWithProviders {\r\n    return {ngModule: FroalaViewModule, providers: []};\r\n  }\r\n}\r\n","import { ModuleWithProviders, NgModule } from '@angular/core';\r\n\r\nimport {FroalaEditorModule} from './editor';\r\nimport {FroalaViewModule} from './view';\r\n\r\nexport {\r\n  FroalaEditorDirective,\r\n  FroalaEditorModule\r\n} from './editor';\r\n\r\nexport {\r\n  FroalaViewDirective,\r\n  FroalaViewModule\r\n} from './view';\r\n\r\nconst MODULES = [\r\n  FroalaEditorModule,\r\n  FroalaViewModule\r\n]\r\n\r\n@NgModule({\r\n imports: [\r\n   FroalaEditorModule.forRoot(),\r\n   FroalaViewModule.forRoot()\r\n ],\r\n exports: MODULES\r\n})\r\nexport class FERootModule {\r\n\r\n}"],"sourceRoot":""}